
<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Automated WMS Testing with Python &#8212; Geographika</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/bootstrap-sphinx.css?v=9afac83c" />
    <link rel="stylesheet" type="text/css" href="../_static/font-awesome-4.7.0/css/font-awesome.min.css?v=02f538dc" />
    <link rel="stylesheet" type="text/css" href="../_static/custom-bootstrap-sphinx.css?v=204fd3f0" />
    <script src="../_static/documentation_options.js?v=f2a433a1"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/ol.js?v=98716c8e"></script>
    <script src="../_static/twitter.js?v=b9d8a76b"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Baking Donuts…" href="baking-donuts.html" />
    <link rel="prev" title="Automated WMS Reports" href="automated-wms-reports.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
<script type="text/javascript" src="../_static/bootstrap-3.4.1/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>

  </head><body>


  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Geographika</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="../software.html">Software</a></li>
                <li><a href="../presentations.html">Presentations</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../software.html">Software Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../presentations.html">Presentations</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../posts/index.html">Posts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Archived Posts</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Automated WMS Testing with Python</a><ul>
<li><a class="reference internal" href="#comments">Comments</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="automated-wms-reports.html" title="Previous Chapter: Automated WMS Reports"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Automated WMS Reports</span>
    </a>
  </li>
  <li>
    <a href="baking-donuts.html" title="Next Chapter: Baking Donuts…"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Baking Donuts… &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">  
    <div class="body col-md-12 content" role="main">
      
  <section id="automated-wms-testing-with-python">
<h1>Automated WMS Testing with Python<a class="headerlink" href="#automated-wms-testing-with-python" title="Link to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">date<span class="colon">:</span></dt>
<dd class="field-odd"><p>2012-06-23 17:53</p>
</dd>
<dt class="field-even">author<span class="colon">:</span></dt>
<dd class="field-even"><p>admin</p>
</dd>
<dt class="field-odd">category<span class="colon">:</span></dt>
<dd class="field-odd"><p>mapserver, python, wms</p>
</dd>
<dt class="field-even">tags<span class="colon">:</span></dt>
<dd class="field-even"><p>automation, ogc, PIL, python, wms</p>
</dd>
<dt class="field-odd">slug<span class="colon">:</span></dt>
<dd class="field-odd"><p>automated-wms-testing-with-python</p>
</dd>
<dt class="field-even">status<span class="colon">:</span></dt>
<dd class="field-even"><p>published</p>
</dd>
</dl>
<div id="automated-wms-testing-with-python" class="document"><p><img alt="image0" src="archive/images/wms_testing/snake.jpg" /> &lt;<a class="reference external" href="http://geographika.co.uk/archive/images/wms_testing/snake.jpg">http://geographika.co.uk/archive/images/wms_testing/snake.jpg</a>&gt;`__This
post and associated script details how to automate testing WMS (Web
Mapping Service) layers. When you’ve set up several MapServer or
GeoServer instances with 100s of layers, its nice to be able to make
sure everything continues to run smoothly.</p>
</p><p>The automation makes maintenance proactive, rather than reacting to
client’s emails wondering where their data has gone, and it beats
pasting long obfuscated URLS into a browser and repeatedly pressing F5..</p>
<p>This script combines three of my current favourite Python libraries.</p>
<ul class="simple">
<li><p><a class="reference external" href="http://www.python.org">OWSLib</a> a Python OGC Web Service utility
library</p></li>
<li><p><a class="reference external" href="http://www.pythonware.com/products/pil/">PIL</a> - The Python
Imaging Library (PIL) used for image processing</p></li>
<li><p><a class="reference external" href="http://docs.python-requests.org/en/latest/">Requests</a> - a Python
library to make web requests - <em>“HTTP for Humans”</em></p></li>
</ul>
<p>The PIL site handily contains Windows installers for nearly every
version of Python. OWSLib and Requests can be added to your Python
installation with easy_install, or PIP. I’m currently sticking with
Python 2.6 as many scripts and packages I’m writing need to work with
ArcGIS, which requires this version, and also on Windows, which puts me
very much in the minority in the Python world outside of ESRI users.</p>
<p>In summary the script does the following:</p>
<ol class="arabic simple">
<li><p>Connects to the WMS Server to retrieve a list of all the WMS layers.</p></li>
<li><p>For each layer it finds the maximum extent of the layer and its
projection code.</p></li>
<li><p>A GetMap request is made to the WMS server for the layer at the
maximum extent.</p></li>
<li><p>Any errors getting the image can be reported. If an image is returned
it is analysed to check if it is empty or blank.</p></li>
</ol>
<p><script src="https://gist.github.com/2978595.js"></script></p><p>I then adapted the sample script to work with Python’s
<a class="reference external" href="http://docs.python.org/library/unittest.html">unittest</a> module so I
could get a nice list of passes and fails for each map layer, and for a
variety of issues such as HTTP failures or removed layers. It is then a
simple step to set up a Windows Task Schedule to do a daily check that
all WMS servers are up and running and returning data.</p>
</div><dl class="field-list simple">
<dt class="field-odd">orphan<span class="colon">:</span></dt>
<dd class="field-odd"><p></p></dd>
</dl>
<hr><section id="comments">
<h2>Comments<a class="headerlink" href="#comments" title="Link to this heading">¶</a></h2>
<img alt="http://www.gravatar.com/avatar/66a954812cb9b8e0277798daa43d325d?s=55&amp;d=identicon&amp;r=g" class="align-left" id="comment-255" src="http://www.gravatar.com/avatar/66a954812cb9b8e0277798daa43d325d?s=55&amp;d=identicon&amp;r=g" />
<p><a class="reference internal" href="comments/automated-wms-testing-with-python.html#comment-255"><span class="std std-ref">1.</span></a> <strong>Antonio Santiago</strong>
**</p>
<p>A write a similar post some time ago:
<a class="reference external" href="http://acuriousanimal.orggeo.net/?q=node/16">http://acuriousanimal.orggeo.net/?q=node/16</a></p>
<p>It is nice to see how “nice” online applications can help us documenting
:)</p>
<a href="mailto:web+automated-diagrams-and-documentation#1@geographika.co.uk?Subject=automated-diagrams-and-documentation" target="_top">Reply</a><hr><img alt="http://www.gravatar.com/avatar/ec399a4765f732e1a2acd5ca7edd0fd5?s=55&amp;d=identicon&amp;r=g" class="align-left" id="comment-256" src="http://www.gravatar.com/avatar/ec399a4765f732e1a2acd5ca7edd0fd5?s=55&amp;d=identicon&amp;r=g" />
<p><a class="reference internal" href="comments/automated-wms-testing-with-python.html#comment-256"><span class="std std-ref">2.</span></a> <strong>geographika</strong>
**</p>
<div class="line-block">
<div class="line"><a class="reference external" href="#comment-255">&#64;Antonio Santiago</a></div>
<div class="line-block">
<div class="line">Anything to make documentation get read!</div>
<div class="line">Your <a href="#id1"><span class="problematic" id="id2">`</span></a>Balloon</div>
</div>
</div>
<p>Project &lt;<a class="reference external" href="http://acuriousanimal.orggeo.net/?q=content/balloon-project">http://acuriousanimal.orggeo.net/?q=content/balloon-project</a>&gt;`__
looks interesting. Its easy to forget NASA Whirlwind when Google Earth
gets all the publicity.</p>
<a href="mailto:web+automated-diagrams-and-documentation#2@geographika.co.uk?Subject=automated-diagrams-and-documentation" target="_top">Reply</a><hr><img alt="http://www.gravatar.com/avatar/48f28dc74ffa851aab0ebcbf2afe1302?s=55&amp;d=identicon&amp;r=g" class="align-left" id="comment-303" src="http://www.gravatar.com/avatar/48f28dc74ffa851aab0ebcbf2afe1302?s=55&amp;d=identicon&amp;r=g" />
<p><a class="reference internal" href="comments/automated-wms-testing-with-python.html#comment-303"><span class="std std-ref">3.</span></a> <strong>Sean Gillies</strong>
**</p>
<p>You wouldn’t believe the work I put into those ASCII class diagrams ;)
It’s definitely kitsch from a bygone age.</p>
<a href="mailto:web+automated-diagrams-and-documentation#3@geographika.co.uk?Subject=automated-diagrams-and-documentation" target="_top">Reply</a><hr><a style="font-size: large; font-weight: bold;" href="mailto:web+automated-wms-testing-with-python@geographika.co.uk?Subject=automated-wms-testing-with-python" target="_top">Add Comment</a></section>
</section>


    </div>
      
  </div>
</div>
<script data-goatcounter="https://geographika.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>

<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2023.<br/>
    </p>
  </div>
</footer>

  </body>
</html>